trading:
  paper_mode: true
  total_capital: 60000
  timezone: "America/New_York"

data:
  provider: "alpaca"
  feed: "iex"  # or "sip"
  cycle_interval_seconds: 300  # 5 min for IEX

risk:
  max_daily_loss_pct: 2.0
  max_drawdown_pct: 8.0
  max_gross_exposure_pct: 80.0
  max_single_position_pct: 5.0
  max_correlated_positions: 3
  strategy_daily_loss_limit_pct: 1.0

execution:
  broker: "alpaca"
  max_spread_pct: 0.3
  use_marketable_limits: true

logging:
  level: "INFO"
  file: "data/logs/algotrader.log"
  json_format: true

strategy_selector:
  enabled: true
  regime_config: "config/regimes.yaml"

  # Minimum score to receive capital allocation
  min_activation_score: 0.35

  # Mid-day review
  review_hour: 12              # Noon ET
  review_minute: 0

  # Allocation bounds
  min_allocation_pct: 3.0      # Floor: 3% if active
  max_total_deployment_pct: 80.0  # Max total deployed (matches risk.max_gross_exposure_pct)

  # Performance-based scaling
  scale_down_threshold_pct: -0.5    # Scale down if losing > 0.5% of allocation
  disable_threshold_pct: -0.8       # Disable if losing > 0.8%
  scale_up_threshold_pct: 0.3       # Scale up if winning > 0.3%
  scale_up_factor: 1.25             # Scale up by 25%
  scale_down_factor: 0.5            # Scale down by 50%
  min_trades_for_review: 2          # Need at least 2 trades before judging

# Strategy configs can also be loaded from config/strategies/<name>.yaml
# Total allocation = 95%. Strategies won't all be active simultaneously
# (regime filtering). Actual deployed capital at any time should be 50-80%.
strategies:
  pairs_trading:
    enabled: true
    capital_allocation_pct: 25.0
    max_positions: 5
    params:
      lookback_bars: 252
      z_entry_threshold: 1.2
      z_exit_threshold: 0.2
      z_stop_threshold: 2.8
      max_bars_in_position: 80
      min_correlation: 0.7
      cointegration_pvalue: 0.05
      per_pair_capital_pct: 2.0
      max_simultaneous_pairs: 5
      bar_timeframe: "5Min"

  gap_reversal:
    enabled: true
    capital_allocation_pct: 12.0
    max_positions: 3
    params: {}  # Uses defaults from strategy or config/strategies/gap_reversal.yaml

  momentum:
    enabled: true
    capital_allocation_pct: 15.0
    max_positions: 4
    params: {}

  vwap_reversion:
    enabled: true
    capital_allocation_pct: 10.0
    max_positions: 3
    params: {}

  options_premium:
    enabled: true
    capital_allocation_pct: 15.0
    max_positions: 3
    params: {}

  sector_rotation:
    enabled: true
    capital_allocation_pct: 10.0
    max_positions: 4
    params: {}

  event_driven:
    enabled: true
    capital_allocation_pct: 8.0
    max_positions: 2
    params: {}
